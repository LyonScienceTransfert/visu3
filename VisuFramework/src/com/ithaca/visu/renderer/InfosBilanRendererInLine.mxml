<?xml version="1.0" encoding="utf-8"?>
<s:MXDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx" 
    focusEnabled="true" xmlns:components="com.ithaca.utils.components.*"
    >
    <fx:Script>
    <![CDATA[
        import com.ithaca.documentarisation.RetroDocumentConst;
        import com.ithaca.documentarisation.model.RetroDocument;
        import com.ithaca.documentarisation.model.Segment;
        import com.ithaca.utils.components.BilanSharedUserToolTip;
        import com.ithaca.utils.components.skins.IconInfoSegmentSkin;
        import com.ithaca.visu.ui.utils.IconEnum;
        
        import gnu.as3.gettext.FxGettext;
        import gnu.as3.gettext._FxGettext;
        
        import mx.collections.ArrayCollection;
        import mx.events.ToolTipEvent;
        import mx.utils.StringUtil;
        
        [Bindable]
        private var fxgt: _FxGettext = FxGettext;
        
        private var blocString:String;
        private var retroDocument:RetroDocument;
        
        override public function set data(value:Object):void 
        {
            super.data = value;
            
            fxgt = FxGettext;
            
            retroDocument = value as RetroDocument;
            
            if (retroDocument != null) 
            {
                var listBloc:ArrayCollection = retroDocument.listSegment as ArrayCollection;
                var nbrTextBloc:int = 0;
                var nbrVideoBloc:int = 0;
                var nbrAudioBloc:int = 0;
                for each( var segment:Segment in listBloc)
                {
                    switch (segment.typeSource)
                    {
                    case RetroDocumentConst.TEXT_SEGMENT:
                    case RetroDocumentConst.TITLE_SEGMENT:
                        nbrTextBloc++;
                        break;
                    case RetroDocumentConst.VIDEO_SEGMENT:
                        nbrVideoBloc++;
                        break;
                    case RetroDocumentConst.COMMENT_AUDIO_SEGMENT:
                        nbrAudioBloc++;
                        break;
                    default:
                        break;
                    }
                }
                
                var ch:String = "";
                var nbrBlocs:int = listBloc.length;
                if(nbrBlocs > 0)
                {
                    labelInfo.text = nbrBlocs.toString()+" (";
                    if(nbrVideoBloc > 0)
                    {
                        labelInfo.text += nbrVideoBloc.toString() + " "+ fxgt.gettext("vidÃ©o");
                        ch = ", ";
                    }
                    if(nbrAudioBloc > 0)
                    {
                        labelInfo.text += ch + nbrAudioBloc.toString() + " "+ fxgt.gettext("audio");
                        ch = ", ";
                    }
                    if(nbrTextBloc > 0)
                    {
                        labelInfo.text += ch + nbrTextBloc.toString() + " "+ fxgt.gettext("autres");
                    }
                    labelInfo.text += ")";
                }
                vgroupInfo.toolTip = labelInfo.text;
                
            }
        } 
        
    ]]>
    </fx:Script>
    <s:VGroup id="vgroupInfo" horizontalAlign="center" verticalAlign="middle" width="100%" height="100%" paddingLeft="5" paddingRight="5" paddingBottom="5" paddingTop="5">
        <s:Label id="labelInfo" width="100%" maxDisplayedLines="1"/>
    </s:VGroup>
</s:MXDataGridItemRenderer>
