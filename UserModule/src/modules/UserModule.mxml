<?xml version="1.0" encoding="utf-8"?>
<modules:VisuModuleBase xmlns:fx="http://ns.adobe.com/mxml/2009" 
		   xmlns:s="library://ns.adobe.com/flex/spark" 
		   xmlns:mx="library://ns.adobe.com/flex/mx" 
		   xmlns:modules="com.ithaca.visu.modules.*" 
		   xmlns:maps="maps.*"
		   xmlns:mate="http://mate.asfusion.com/"
		   xmlns:controls="com.ithaca.visu.controls.*"
		   configure="configureHandler(event)"
		   creationComplete="creationCompleteHandler(event)"
		   top="0" bottom="0" left="0" right="0" 
		   xmlns:vo="com.lyon2.visu.vo.*" 
		   xmlns:user="com.ithaca.visu.view.user.*" 
		   >
	<fx:Declarations>
		<maps:UserMap dispatcher="{this}"/>
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[
			import com.ithaca.visu.events.InitMapEvent;
			import com.ithaca.visu.events.VisuModuleEvent;
			import com.ithaca.visu.view.user.skins.UserManagementSkin;
			
			import mx.events.FlexEvent;			

			
			protected function creationCompleteHandler(event:FlexEvent):void
			{
				// check status logged user
				/*
				var loggedUser:User =  Model.getInstance().getLoggedUser();
				var statusLoggedUser:int =loggedUser.status; 
				if(statusLoggedUser == ConnectionStatus.CONNECTED)
				{
					Model.getInstance().updateStatusLoggedUser(ConnectionStatus.PENDING);
					var outSession:SessionEvent = new SessionEvent(SessionEvent.OUT_SESSION);
					outSession.userId = loggedUser.id_user;
					this.dispatchEvent(outSession);
				}
				*/
				trace("InitMapEvent.INIT_MAP_USER");
				dispatchEvent( new InitMapEvent(InitMapEvent.INIT_MAP_USER) );
			}
			
			protected function configureHandler(event:VisuModuleEvent):void
			{				
				if((event.currentTarget as UserModule).parameters != null)
				{
					var param:Object = (event.currentTarget as UserModule).parameters ;
					
				}
			}
			
	

			protected function visumodulebase1_initializeHandler(event:FlexEvent):void
			{
				//dispatchEvent( new InitMapEvent(InitMapEvent.INIT_MAP_USER) );
			}

		]]>
	</fx:Script>

	<user:UserManagement top="0" left="0" right="0" bottom="0"
						  skinClass="com.ithaca.visu.view.user.skins.UserManagementSkin"
						  />
</modules:VisuModuleBase>
