<?xml version="1.0" encoding="utf-8"?>
<modules:VisuModuleBase xmlns:fx="http://ns.adobe.com/mxml/2009" 
						xmlns:s="library://ns.adobe.com/flex/spark" 
						xmlns:mx="library://ns.adobe.com/flex/mx" 
						xmlns:modules="com.ithaca.visu.modules.*"
						
						width="100%" height="100%" 
						creationComplete="visumodulebase1_creationCompleteHandler(event)" 
						configure="visumodulebase1_configureHandler(event)" 
						xmlns:maps="maps.*"	> 
	<fx:Script>
		<![CDATA[ 
			import com.ithaca.visu.events.InitMapEvent;
			import com.ithaca.visu.events.SessionEvent;
			import com.ithaca.visu.events.VisuActivityEvent;
			import com.ithaca.visu.events.VisuModuleEvent;
			import com.ithaca.visu.ui.utils.ConnectionStatus;
			import com.lyon2.visu.model.Model;
			import com.lyon2.visu.model.User;
			
			import mx.events.FlexEvent;
			
			
			protected function visumodulebase1_creationCompleteHandler(event:FlexEvent):void
			{
				// check status logged user
				var loggedUser:User =  Model.getInstance().getLoggedUser();
				var statusLoggedUser:int =loggedUser.status; 
				if(statusLoggedUser == ConnectionStatus.CONNECTED)
				{
					Model.getInstance().updateStatusLoggedUser(ConnectionStatus.PENDING);
					var outSession:SessionEvent = new SessionEvent(SessionEvent.OUT_SESSION);
					outSession.userId = loggedUser.id_user;
					this.dispatchEvent(outSession);
				}
				
			}
				
			protected function visumodulebase1_configureHandler(event:VisuModuleEvent):void
			{			
				if((event.currentTarget as RetrospectionModule).parameters != null)
				{
					var param:Object = (event.currentTarget as RetrospectionModule).parameters ;
				}
				var initMapEvent:InitMapEvent = new InitMapEvent(InitMapEvent.INIT_MAP_RETROSPECTION);
				this.dispatchEvent(initMapEvent); 
			}
		]]>
		
	</fx:Script>
	
<mx:HDividedBox height="100%" width="100%">
	<mx:VDividedBox width="100%" height="100%">
		<mx:HDividedBox width="100%" height="60%">
			<s:Panel height="100%" width="70%">
				<s:title>Video</s:title>
			</s:Panel>
			<s:Panel height="100%" width="30%">
				<s:title>Iconographie</s:title>
			</s:Panel>
		</mx:HDividedBox>
		<s:Panel width="100%" height="40%">
			<s:title>Timeline</s:title>
		</s:Panel>
	</mx:VDividedBox>
</mx:HDividedBox>
</modules:VisuModuleBase>